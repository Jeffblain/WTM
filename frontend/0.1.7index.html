<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wine Tasting Selection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #8B0000, #A52A2A);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .toggle-view {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }
        
        .toggle-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
            transition: all 0.3s;
        }
        
        .toggle-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .toggle-btn.active {
            background: #28a745;
        }
        
        .view {
            padding: 30px;
            display: none;
        }
        
        .view.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #007bff;
        }
        
        .guest-names {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .guest-name-input {
            display: flex;
            flex-direction: column;
        }
        
        .guest-name-input label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #666;
        }
        
        .guest-name-input input {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
        
        .wine-grid {
            display: grid;
            grid-template-columns: 2fr repeat(4, 1fr);
            gap: 15px;
            margin-top: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .wine-header, .guest-header {
            font-weight: 700;
            color: #8B0000;
            padding: 15px 10px;
            background: white;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .wine-item {
            font-weight: 600;
            padding: 12px 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #8B0000;
        }
        
        .wine-name {
            font-size: 1rem;
            color: #333;
            margin-bottom: 5px;
        }
        
        .wine-description {
            font-size: 0.8rem;
            color: #666;
            font-weight: 400;
            font-style: italic;
        }
        
        .wine-checkbox {
            text-align: center;
            padding: 10px;
        }
        
        .wine-checkbox input {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .submit-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .group-tile {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .group-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #007bff;
        }
        
        .group-tile.active {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
        }
        
        .wine-glass {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .group-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 5px;
        }
        
        .group-info {
            font-size: 0.9rem;
            color: #666;
        }
        
        .order-summary {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .guest-summary {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #007bff;
        }
        
        .guest-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .guest-number {
            font-weight: 700;
            color: #333;
        }
        
        .guest-name-display {
            font-weight: 500;
            color: #007bff;
            font-size: 1.1rem;
        }
        
        .wine-service-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .wine-service-item:last-child {
            border-bottom: none;
        }
        
        .wine-service-name {
            flex: 1;
            font-weight: 500;
        }
        
        .status-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            margin-left: 10px;
        }
        
        .status-pending {
            background: #ffc107;
            color: #212529;
        }
        
        .status-servi {
            background: #28a745;
            color: white;
        }
        
        .status-non-servi {
            background: #8B0000;
            color: white;
        }
        
        .message {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #c3e6cb;
        }
        
        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            background: #545b62;
        }
        
        @media (max-width: 768px) {
            .wine-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .guest-header {
                display: none;
            }
            
            .wine-checkbox {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: white;
                border-radius: 8px;
                margin-bottom: 10px;
            }
            
            .guest-names {
                grid-template-columns: 1fr;
            }
            
            .groups-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç∑ Vignoble le Chat Bott√© - D√©gustation</h1>
            <p>S√©lectionnez votre parfaite exp√©rience</p>
        </div>
        
        <div class="toggle-view">
            <button class="toggle-btn active" onclick="showView('visitor')">Formulaire pour invit√©s</button>
            <button class="toggle-btn" onclick="showView('host')">Tableau pour h√¥tes</button>
        </div>
        
        <!-- Visitor View -->
        <div id="visitor-view" class="view active">
            <div class="form-group">
                <label for="groupName">Nom du groupe (obligatoire)</label>
                <input type="text" id="groupName" placeholder="Entrez le nom de votre groupe..." required>
            </div>
            
            <div class="guest-names">
                <div class="guest-name-input">
                    <label>Invit√© 1 </label>
                    <input type="text" id="guest1Name" placeholder="Entrez votre pr√©nom...">
                </div>
                <div class="guest-name-input">
                    <label>Invit√© 2 </label>
                    <input type="text" id="guest2Name" placeholder="Entrez votre pr√©nom...">
                </div>
                <div class="guest-name-input">
                    <label>Invit√© 3 </label>
                    <input type="text" id="guest3Name" placeholder="Entrez votre pr√©nom...">
                </div>
                <div class="guest-name-input">
                    <label>Invit√© 4 </label>
                    <input type="text" id="guest4Name" placeholder="Entrez votre pr√©nom...">
                </div>
            </div>
            
            <div class="wine-grid">
                <div class="wine-header">S√©lection de vins - Cidres</div>
                <div class="guest-header">Invit√© 1</div>
                <div class="guest-header">Invit√© 2</div>
                <div class="guest-header">Invit√© 3</div>
                <div class="guest-header">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Ze Flying Pig - Cidre</div>
                    <div class="wine-description">Cidre brut mousseux issu de nos pommes McIntosh. √âlev√© sur les marcs de nos raisins rouges et pr√©sentant de belles bulles fines. Ar√¥mes d√©licats de petits fruits rouges. Sec et rafra√Æchissant.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine1-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine1-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine1-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine1-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Petnat Chardonnay - Bulles</div>
                    <div class="wine-description">P√©tillant naturel 100% Chardonnay, certifi√© biologique et produit selon la m√©thode ancestrale. Sans sulfite, son effervescence naturelle donne une bulle fine, vive et rafra√Æchissante, mettant en valeur les notes min√©rales exprim√©es par notre terroir.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine2-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine2-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine2-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine2-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Blanc - Bio</div>
                    <div class="wine-description">Vin √† la robe claire de reflets jaun√¢tres pr√©sentant un nez frais et min√©ral. Bouche mordante de min√©ralit√© aux notes de p√™che blanche et pr√©sentant une belle mati√®re. Impressionnant par sa longueur en bouche.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine3-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine3-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine3-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine3-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Gris de Gris</div>
                    <div class="wine-description">Ros√© pr√©sentant des notes typiques de pamplemousse et de zeste d'agrumes.  Teinte p√™che dor√©e, demi-sec, vif, fruit√© et rafra√Æchissant.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine4-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine4-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine4-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine4-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Ros√© Plamplemousse</div>
                    <div class="wine-description">Robe de couleur p√™che, nez pr√©sentant des ar√¥mes frais de pamplemousse rose. Bouche gardant une trame min√©rale et pr√©sentant une belle mati√®re. Notes de caramel et de doux pamplemousse rose lui donnant une belle longueur. </div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine5-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine5-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine5-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine5-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Premier Pas - Bio</div>
                    <div class="wine-description">Vin rouge ferment√© en grappes enti√®res. Foulage aux pieds selon une m√©thode traditionnelle bourguignonne. Vin de soif pr√©sentant des notes poivr√©es, de cerise noire et des tannins souples. Belle longueur en bouche. </div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine6-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine6-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine6-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine6-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">H√©lium</div>
                    <div class="wine-description">H√©lium tire son origine du mot grec "Helios" qui signifie soleil. Chaleureux, √©quilibr√©, aromatique et souple. Vin l√©g√®rement bois√© s'ouvrant sur des notes de cerise ferment√©e, de fruits des bois et de moka vanill√©.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine7-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine7-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine7-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine7-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Rouge Bourbon</div>
                    <div class="wine-description">Premier vin rouge √©lev√© en f√ªts de Bourbon au Qu√©bec. Passage en barriques lui conf√©rant rondeur et complexit√©. Ar√¥mes de caramel √©cossais, de vanille et de fruits noirs.  </div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine8-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine8-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine8-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine8-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Rouge Cognac</div>
                    <div class="wine-description">Premier vin rouge √©lev√© en f√ªts de Cognac au Qu√©bec. Assemblage de Frontenac et Marquette √©lev√© 12 mois en barriques de Cognac. En bouche, notes bois√©es bien fondues de cerise noire confite, de poivre rose et d'√©pices. Vin sec et mi-cors√© tout en √©quilibre et tannins souples.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine9-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine9-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine9-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine9-g4">Invit√© 4</div>
                
                <div class="wine-item">
                    <div class="wine-name">Le Chat Noir</div>
                    <div class="wine-description">Premier vin de paille fortifi√© au Qu√©bec. Vin fortifi√© au Brandy √† partir d'assemblage de Paill√©s Noirs. Rappelant un Porto Tawny avec ses ar√¥mes de fruits noirs confits, de m√©lasse, de caramel et de chocolat.</div>
                </div>
                <div class="wine-checkbox"><input type="checkbox" id="wine10-g1">Invit√© 1</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine10-g2">Invit√© 2</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine10-g3">Invit√© 3</div>
                <div class="wine-checkbox"><input type="checkbox" id="wine10-g4">Invit√© 4</div>
                
            </div>
            
            <div style="text-align: center;">
                <button class="submit-btn" id="submitOrder" onclick="submitOrder()">Soumettez votre s√©lection</button>
            </div>
            
            <div id="successMessage" style="display: none;">
                <div class="success-message">
                    <h3>‚úÖ Commande pass√©e avec succ√®s</h3>
                    <p>Votre s√©lection a √©t√© transmise, veuillez svp vous pr√©senter au comptoir de la boutique pour votre premi√®re d√©gustation</p>
                </div>
            </div>
        </div>
        
        <!-- Host View -->
        <div id="host-view" class="view">
            <div id="groupsView">
                <h2>S√©lectionnez un groupe</h2>
                <div class="groups-grid" id="groupsGrid">
                    <!-- Groups will be populated here -->
                </div>
            </div>
            
            <div id="groupDetailsView" style="display: none;">
                <button class="back-btn" onclick="showGroupsView()">‚Üê Retour aux groupes</button>
                <div id="hostContent">
                    <!-- Group details will be populated here -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let formSubmitted = false;
        let currentGroup = null;
        
        const wines = [
            { name: "Ze Flying Pig - Cidre", description: "Crisp, buttery notes with hints of vanilla and oak" },
            { name: "Petnat Chardonnay - Bulles", description: "Light-bodied with cherry and earthy undertones" },
            { name: "Blanc - Bio", description: "Full-bodied with dark fruit and spice finish" },
            { name: "Gris de Gris", description: "Bright, citrusy with tropical fruit aromas" },
            { name: "Ros√© Plamplemousse", description: "Smooth, velvety with plum and chocolate notes" },
            { name: "Premier Pas - Bio", description: "Sweet, honeyed with apricot and floral notes" },
            { name: "H√©lium", description: "Fresh, light with strawberry and mineral finish" },
            { name: "Rouge Bourbon", description: "Bold, peppery with dark berry and smoke" },
            { name: "Rouge Cognac", description: "Aromatic, spicy with lychee and rose petal" },
            { name: "Le Chat Noir", description: "Rich, jammy with blackberry and pepper spice" }
        ];
        
        // Sample groups for demo
        const sampleGroups = [
            { name: "Johnson Party", guests: 4, timestamp: "2:30 PM", status: "Non-servi" },
            { name: "Famille Ricard/Gu√©nette", guests: 3, timestamp: "2:45 PM", status: "active" },
            { name: "Bachelorette Party", guests: 2, timestamp: "3:00 PM", status: "Non-servi" },
            { name: "√âquipe Vignerons", guests: 4, timestamp: "3:15 PM", status: "Non-servi" },
            { name: "Cercle des fermi√®res St-Bruno", guests: 4, timestamp: "3:30 PM", status: "Non-servi" }
        ];
        
        function showView(view) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(view + '-view').classList.add('active');
            event.target.classList.add('active');
            
            if (view === 'host') {
                showGroupsView();
                populateGroups();
            }
        }
        
        function populateGroups() {
            const grid = document.getElementById('groupsGrid');
            let html = '';
            
            // Add submitted group if exists
            if (window.orderData) {
                html += `
                    <div class="group-tile" onclick="selectGroup('${window.orderData.groupName}', true)">
                        <div class="wine-glass">üç∑</div>
                        <div class="group-name">${window.orderData.groupName}</div>
                        <div class="group-info">${window.orderData.timestamp}</div>
                    </div>
                `;
            }
            
            // Add sample groups
            sampleGroups.forEach(group => {
                html += `
                    <div class="group-tile" onclick="selectGroup('${group.name}', false)">
                        <div class="wine-glass">üç∑</div>
                        <div class="group-name">${group.name}</div>
                        <div class="group-info">${group.guests} invit√©s ‚Ä¢ ${group.timestamp}</div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }
        
        function selectGroup(groupName, isSubmitted) {
            let data;
            if (isSubmitted && window.orderData && window.orderData.groupName === groupName) {
                data = window.orderData;
            } else {
                data = generateSampleData(groupName);
            }
            
            displayGroupData(data);
            showGroupDetailsView();
        }
        
        function showGroupsView() {
            document.getElementById('groupsView').style.display = 'block';
            document.getElementById('groupDetailsView').style.display = 'none';
        }
        
        function showGroupDetailsView() {
            document.getElementById('groupsView').style.display = 'none';
            document.getElementById('groupDetailsView').style.display = 'block';
        }
        
        function submitOrder() {
            const groupName = document.getElementById('groupName').value.trim();
            if (!groupName) {
                alert('Please enter a group name');
                return;
            }
            
            // Collect guest names
            const guestNames = {};
            for (let i = 1; i <= 4; i++) {
                const name = document.getElementById(`guest${i}Name`).value.trim();
                if (name) guestNames[`guest${i}`] = name;
            }
            
            // Collect selections
            const selections = {};
            for (let guest = 1; guest <= 4; guest++) {
                selections[`guest${guest}`] = [];
                for (let wine = 1; wine <= 12; wine++) {
                    const checkbox = document.getElementById(`wine${wine}-g${guest}`);
                    if (checkbox && checkbox.checked) {
                        selections[`guest${guest}`].push({
                            wine: wines[wine-1].name,
                            status: 'Non-servi'
                        });
                    }
                }
            }
            
            // Store in memory (simulate database)
            window.orderData = {
                groupName: groupName,
                guestNames: guestNames,
                selections: selections,
                submitted: true,
                timestamp: new Date().toLocaleString()
            };
            
            // Disable form
            document.querySelectorAll('input').forEach(input => input.disabled = true);
            document.getElementById('submitOrder').disabled = true;
            document.getElementById('successMessage').style.display = 'block';
            formSubmitted = true;
        }
        
        function generateSampleData(groupName) {
            const sampleNames = {
                guest1: "Mike",
                guest2: "Sarah",
                guest3: "David",
                guest4: "Lisa"
            };
            
            return {
                groupName: groupName,
                guestNames: sampleNames,
                submitted: true,
                timestamp: new Date().toLocaleString(),
                selections: {
                    guest1: [
                        { wine: "Rouge Bourbon", status: "Servi" },
                        { wine: "H√©lium", status: "Non servi" }
                    ],
                    guest2: [
                        { wine: "Ros√© Plamplemousse", status: "Non Servi" },
                        { wine: "Gris de Gris", status: "Servi" }
                    ],
                    guest3: [
                        { wine: "Le Chat Noir", status: "Servi" }
                    ],
                    guest4: [
                        { wine: "Petnat Chardonnay - Bulles", status: "Servi" },
                        { wine: "Blanc - Bio", status: "Non Servi" }
                    ]
                }
            };
        }
        function getStatusClass(status) {
			switch(status.toLowerCase()) {
				case 'servi': return 'status-servi';
				case 'non servi': return 'status-non-servi';
				default: return 'status-non-servi';
			}
		}
		
        function displayGroupData(data) {
            const content = document.getElementById('hostContent');
            let html = `
                <div class="order-summary">
                    <h2>üç∑ Groupe: ${data.groupName}</h2>
                    <p><strong>Soumise:</strong> ${data.timestamp}</p>
                </div>
            `;
            
            for (let guest = 1; guest <= 4; guest++) {
                const guestSelections = data.selections[`guest${guest}`] || [];
                if (guestSelections.length > 0) {
                    const guestName = data.guestNames && data.guestNames[`guest${guest}`] ? 
                        data.guestNames[`guest${guest}`] : null;
                    
                    html += `
                        <div class="guest-summary">
                            <div class="guest-title">
                                <span class="guest-number">Guest ${guest}</span>
                                ${guestName ? `<span class="guest-name-display">${guestName}</span>` : ''}
                            </div>
                    `;
                    
                    guestSelections.forEach((item, index) => {
                        const statusClass = getStatusClass(item.status);
                        html += `
                            <div class="wine-service-item">
                                <span class="wine-service-name">${item.wine}</span>
                                <button class="${statusClass} status-btn" onclick="cycleStatus('guest${guest}', ${index})">
                                    ${item.status.charAt(0).toUpperCase() + item.status.slice(1)}
                                </button>
                            </div>
                        `;
                    });
                    
                    html += `</div>`;
                }
            }
            
            if (html === `<div class="order-summary"><h2>üç∑ Groupe ${data.groupName}</h2><p><strong>Commande soumise:</strong> ${data.timestamp}</p></div>`) {
                html += `<div class="message"><p>No wine selections found for this group.</p></div>`;
            }
            
            content.innerHTML = html;
            currentGroup = data;
        }
        
        function cycleStatus(guest, itemIndex) {
            if (!currentGroup) return;
            
            const statuses = ['Servi', 'Non servi'];
            const currentStatus = currentGroup.selections[guest][itemIndex].status;
            const currentIndex = statuses.indexOf(currentStatus);
            const nextIndex = (currentIndex + 1) % statuses.length;
            
            currentGroup.selections[guest][itemIndex].status = statuses[nextIndex];
            displayGroupData(currentGroup);
        }
        
        // Initialize groups on page load
        document.addEventListener('DOMContentLoaded', function() {
            populateGroups();
        });
    </script>
</body>
</html>